# Bilibili 字幕获取工具

一个用于获取 Bilibili 视频字幕的 Python 工具，支持提取视频的中文字幕和英文字幕，并保存为 Markdown 文件。

## 功能特点

- 支持从 Bilibili 视频链接中提取 BV 号和分 P 信息
- 自动获取视频的中文字幕（包括人工字幕和 AI 生成字幕）和英文字幕
- 将获取到的字幕合并保存为 Markdown 文件
- 支持通过二维码登录获取权限，以访问需要登录才能查看的视频字幕

## 依赖安装

使用前请先安装所需依赖：

```bash
pip install requests qrcode pillow
```

## 使用方法

1. 直接运行脚本：
   ```bash
   python getBSubtitle.py
   ```

2. 首次运行时，程序会生成登录二维码，请使用 Bilibili 手机客户端扫描二维码并确认登录

3. 登录成功后，程序会自动保存 cookie 到 `cookies.json` 文件，下次运行无需重复登录

4. 按照提示输入需要获取字幕的 Bilibili 视频链接

5. 程序会自动解析视频信息并获取字幕，最终生成以视频分 P 标题命名的 Markdown 文件

## 注意事项

- 请定期删除 `cookies.json` 文件并重新扫码登录，以确保 cookie 的有效性
- 并非所有视频都有字幕，程序会自动识别并提示是否存在字幕
- 支持的字幕类型：
  - 中文字幕（`zh-CN` 类型）
  - AI 生成中文字幕（`ai-zh` 类型）
  - 英文字幕（`en-US` 类型）

## 常见问题

1. **提示链接格式错误**：请检查输入的链接是否包含 BV 号，支持的链接格式如：
   - `https://www.bilibili.com/video/BV1xx411c7mG`
   - `https://www.bilibili.com/video/BV1xx411c7mG?p=2`

2. **无法获取字幕**：可能原因包括：
   - 视频本身没有字幕
   - 需要登录才能查看的视频未正确登录
   - cookie 已过期，请删除 `cookies.json` 后重新登录

3. **二维码无法显示**：请确保已安装 pillow 库，并且系统具有图片显示能力

## 免责声明

本工具仅用于学习和研究目的，请勿用于任何商业用途或侵犯他人权益的行为。使用本工具应遵守 Bilibili 的用户协议和相关法律法规。